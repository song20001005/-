Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatDate=n;var e=require("../@babel/runtime/helpers/typeof"),t=require("../@babel/runtime/helpers/defineProperty"),r=require("../@babel/runtime/helpers/slicedToArray");function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("string"==typeof e)return e;if(!e||null==e)return null;var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}function i(e){return e*Math.PI/180}var a={getStorage:function(e){var t=wx.getStorageSync(e);if(!t||!t.length)return[];var r=parseInt(Date.now()/1e3),n=t.filter((function(e){return e.expired>r}));return wx.setStorageSync(e,n),n.map((function(e){return e.value}))},setStorage:function(e,t,r){var n=wx.getStorageSync(e),i={value:t,expired:parseInt(Date.now()/1e3)+r};if(n&&n.length){if(n.some((function(e){return e.value===t})))return n.map((function(e){return e.value}));(n=n.slice(0,19)).unshift(i)}else n=[i];return wx.setStorageSync(e,n),n.map((function(e){return e.value}))},clearStorage:function(e){wx.removeStorage({key:e})}};module.exports={formatDate:n,getDistance:function(e,t,r,n){if(!e||!r)return null;var a=i(e),u=i(r),o=a-u,l=i(t)-i(n),c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(l/2),2)));return c=(c*=6378.137)<1?(c=Math.round(1e3*c)).toFixed(0)+"m":(c=Math.round(1e4*c)/1e4).toFixed(1)+"km"},debounce:function(e,t,r){var n;return function(){var i=r||this,a=arguments,u=function(){n=null,e.apply(i,a)};clearTimeout(n),n=setTimeout(u,t)}},throttle:function(e,t,r){var n,i;return t||(t=250),function(){var a=r||this,u=+new Date,o=arguments;u-n<t?(clearTimeout(i),i=setTimeout((function(){n=u,e.apply(a,o)}),t)):(n=u,e.apply(a,o))}},periodicArrStorage:a,uniqueArr:function(e,t){var r=new Map;return e.filter((function(e){return!r.has(e[t])&&r.set(e[t],1)}))},getUrlParam:function(e){var n=e.match(/([?&])(.+?=[^&]+)/gim);return n?n.reduce((function(e,n){var i=n.slice(1).split("="),a=r(i,2),u=a[0],o=a[1];return Object.assign(e,t({},u,o))}),{}):{}},updUrlParam:function(e,t,r){var n=t+"="+r,i=new RegExp("(".concat(t,"=)([^&]*)"));return e.match(i)?e.replace(i,n):e.match("[?]")?e+"&"+n:e+"?"+n},delUrlParam:function(e,t){if(-1==e.indexOf(t))return e;for(var r=e.split("?"),n=r[0],i=r[1].split("&"),a=-1,u=0;u<i.length;u++){if(i[u].split("=")[0]==t){a=u;break}}return-1==a?e:(i.splice(a,1),n+"?"+i.join("&"))},isLatestVerison:function(e,t){if(!e||!t||"string"!=typeof e||"string"!=typeof t)return!0;e=e.split(".").map((function(e){return+e})),t=t.split(".").map((function(e){return+e}));for(var r=0;r<e.length;r++)if((e[r]||0)<(t[r]||0))return!1;return!0},splitSprice:function(e){return e?(e/100).toString().split("."):[0]},dealTime:function(e){return(e&&"string"==typeof e?e.split(" ")[0]:"").replace(/-/g,".")},createStrBeforeSign:function(e){for(var t="",r=Object.keys(e).sort(),n=0;n<r.length;n++){var i=r[n];(e[i]||0===e[i])&&(t+="".concat(n?"&":"").concat(i,"=").concat(e[i]))}return t},multiplyArray:function(e,t){return new Array(e).fill(t).flat()},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},filterNull:function t(r){if(Array.isArray(r))return r.map(t);if("object"!==e(r)||null===r)return r;var n={};for(var i in r)r.hasOwnProperty(i)&&null!==r[i]&&""!==r[i]&&(n[i]=t(r[i]));return n}};