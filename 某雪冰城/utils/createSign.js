var e=require("../@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return l.apply(this,arguments)};var r=e(require("../@babel/runtime/regenerator")),t=require("../@babel/runtime/helpers/typeof"),n=require("../@babel/runtime/helpers/objectSpread2"),a=require("../@babel/runtime/helpers/asyncToGenerator"),i=e(require("./wasm/rsa_sign")),u=e(require("../config/index")),p=wx.getStorageSync("env")||"pro",o=u.default[p],s=o.appId_weixin,c=o.privateKey_weixin;function l(){return(l=a(r.default.mark((function e(a){var u,p,o,l,f,b,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u="",p=n(n({},a),{},{t:Date.now()-(getApp().configData.timeOffset||0),appId:s}),o=Object.keys(p).sort(),l=0;l<o.length;l++)f=o[l],p[f]||0===p[f]?(b="object"===t(p[f])?JSON.stringify(p[f]):p[f],u+="".concat(l?"&":"").concat(f,"=").concat(b)):""!==p[f]&&delete p[f];return e.next=6,(0,i.default)(u,c);case 6:return d=e.sent,e.abrupt("return",n(n({},p),{},{sign:d.replace(/\//g,"_").replace(/\+/g,"-")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}