var t=require("../../@babel/runtime/helpers/interopRequireDefault"),e=require("../../@babel/runtime/helpers/defineProperty"),a=t(require("./watcher"));function i(){}var r=Page;Page=function(t){var n=t.onLoad||i,c=t.onUnload||i;return t.onLoad=function(){var i=this,r=this.setData,c=t.data||{},u={};if(this.setData=function(a,i,n){r.call(this,a,(function(){var c=this;if(t.computed&&Object.keys(u).forEach((function(i){Object.keys(a).forEach((function(a){(u[i].includes(a)||u[i].includes(a.split(".")[0])||u[i].includes(a.split("[")[0]))&&r.call(c,e({},i,t.computed[i].call(c,c.data)))}))})),i)if(n)var o=setTimeout((function(){i.call(c),clearTimeout(o)}),n);else i.call(this)}))},this._watcher=this._watcher||new a.default(c,this.setData.bind(this)),t.computed){var o=JSON.parse(JSON.stringify(this.data)),s=[],l=function(t){var e=o[t];Object.defineProperty(o,t,{get:function(){return s.push(t),e}})};for(var f in o)l(f);var h=function(a){var r=t.computed[a];i.setData(e({},a,r.call(i,o)),(function(){u[a]=s}))};for(var d in t.computed)h(d)}return n.apply(this,arguments)},t.onUnload=function(){return this._watcher.removeObserver(),c.apply(this,arguments)},r(t)};